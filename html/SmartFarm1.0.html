<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="generator" content="Google Web Designer 1.7.0.1114">
  <meta name="template" content="Banner 3.0.0">
  <meta name="environment" content="gwd-doubleclick">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="gwdpage_style.css" rel="stylesheet" data-version="8" data-exports-type="gwd-page">
  <link href="gwdpagedeck_style.css" rel="stylesheet" data-version="9" data-exports-type="gwd-pagedeck">
  <link href="gwddoubleclick_style.css" rel="stylesheet" data-version="14" data-exports-type="gwd-doubleclick">
  <link href="gwdimage_style.css" rel="stylesheet" data-version="9" data-exports-type="gwd-image">
  <style type="text/css" id="gwd-lightbox-style">
    .gwd-lightbox {
      overflow: hidden;
    }
  </style>
  <style type="text/css" id="gwd-text-style">
    p {
      margin: 0px;
    }
    h1 {
      margin: 0px;
    }
    h2 {
      margin: 0px;
    }
    h3 {
      margin: 0px;
    }
  </style>
  <style type="text/css">
    html, body {
      width: 100%;
      height: 100%;
      margin: 0px;
    }
    .gwd-page-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    .gwd-page-content {
      transform: perspective(1400px) matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
      transform-style: preserve-3d;
      position: absolute;
      background-color: transparent;
    }
    .gwd-page-wrapper {
      position: absolute;
      transform: translateZ(0px);
      background-color: rgb(255, 255, 255);
    }
    .gwd-page-size {
      width: 728px;
      height: 500px;
    }
    .gwd-img-j0w7 {
      position: absolute;
      transform-style: preserve-3d;
      width: 728px;
      transform: translate3d(-354px, 0px, 0px);
      height: 385px;
      transform-origin: 363.954px 192.507px 0px;
      left: 48.63%;
      top: 55px;
    }
    .gwd-img-mood {
      position: absolute;
      width: 30px;
      height: 29px;
      transform-origin: 14.9363px 14.6807px 0px;
      left: 373px;
      top: 242px;
    }
    .gwd-img-1u3h {
      left: 366px;
      top: 305px;
      transform-origin: 29.9969px 28.9913px 0px;
    }
    .gwd-img-1q6m {
      width: 30px;
      transform-origin: 29.9969px 28.9913px 0px;
      left: 220px;
      top: 309px;
    }
    .gwd-img-1itq {
      width: 30px;
      height: 29px;
      transform-origin: 14.9363px 14.6807px 0px;
      left: 212px;
      top: 216px;
    }
    .gwd-img-1bdg {
      width: 30px;
      height: 29px;
      transform-origin: 14.9363px 14.6807px 0px;
      top: 271px;
      left: 177px;
    }
    .gwd-img-pwgz {
      top: 271px;
      left: 146px;
    }
    .gwd-img-tqpw {
      left: 373px;
      top: 242px;
      width: 30px;
      height: 29px;
      transform-origin: 14.9363px 14.6807px 0px;
    }
    .gwd-img-xdxv {
      width: 30px;
      height: 29px;
      transform-origin: 14.9363px 14.6807px 0px;
      left: 62px;
      top: 306px;
    }
    .gwd-img-8f5r {
      left: 62px;
      top: 254px;
    }
    .gwd-img-u0v9 {
      position: absolute;
      height: 42px;
      width: 41px;
      transform-origin: 20.2803px 20.9931px 0px;
      visibility: hidden;
      left: 418px;
      top: 184px;
    }
    .gwd-img-1fse {
      top: 241px;
      height: 29px;
      left: 375px;
      width: 30px;
      transform-origin: 14.9363px 14.6807px 0px;
    }
    .gwd-img-3yc8 {
      top: 298px;
      left: 360px;
    }
    .gwd-img-1908 {
      left: 214px;
      top: 304px;
    }
    .gwd-img-16s1 {
      left: 207px;
      top: 211px;
    }
    .gwd-img-162d {
      left: 173px;
      top: 265px;
    }
    .gwd-img-1xfe {
      top: 264px;
      left: 135px;
    }
    .gwd-img-ds25 {
      left: 57px;
      top: 247px;
    }
    .gwd-img-91eq {
      left: 57px;
      top: 300px;
    }
    .gwd-img-1m3g {
      left: 370px;
      top: 235px;
    }
    .gwd-span-srkn {
      position: absolute;
      border: 2px solid rgba(181, 160, 225, 0.960784);
      font-family: Arial;
      text-align: center;
      height: 20px;
      top: 238px;
      width: 67px;
      transform-origin: 33.1064px 8.05069px 0px;
      left: 298px;
      font-size: 14px;
      font-weight: bold;
      background-image: none;
      background-color: rgb(205, 202, 223);
    }
    .gwd-img-97wm {
      position: absolute;
      width: 50px;
      height: 50px;
      left: 10px;
      top: 67px;
    }
  </style>
  <script data-source="googbase_min.js" data-version="3" data-exports-type="googbase" src="googbase_min.js"></script>
  <script data-source="gwd_webcomponents_min.js" data-version="5" data-exports-type="gwd_webcomponents" src="gwd_webcomponents_min.js"></script>
  <script data-source="gwdpage_min.js" data-version="8" data-exports-type="gwd-page" src="gwdpage_min.js"></script>
  <script data-source="gwdpagedeck_min.js" data-version="9" data-exports-type="gwd-pagedeck" src="gwdpagedeck_min.js"></script>
  <script data-source="https://s0.2mdn.net/ads/studio/Enabler.js" data-exports-type="gwd-doubleclick" src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>
  <script data-source="gwddoubleclick_min.js" data-version="14" data-exports-type="gwd-doubleclick" src="gwddoubleclick_min.js"></script>
  <script data-source="gwdimage_min.js" data-version="9" data-exports-type="gwd-image" src="gwdimage_min.js"></script>
  <script type="text/javascript" gwd-events="support" src="gwd-events-support.1.0.js"></script>
  <script type="text/javascript" src="/webiopi.js"></script>
  <script type="text/javascript">
		
		var onOffButtonArray = {buttonName:"OnOffButton", relayPort:2, onImage:"on_button-image", offImage:"off_button-image", autoImage:"auto_button-image"};
		var valveArray = [{valveName:"FontRightValve", motor1Port:3, motor2Port:4, valveImage:"font_right_valve-image", waterImage:"font_right_water-image", executionOrder:1},
						  {valveName:"FontLeftValve", motor1Port:17, motor2Port:27, valveImage:"font_left_valve-image", waterImage:"font_left_water-image", executionOrder:1},
						  {valveName:"MiddleRightValve", motor1Port:22, motor2Port:5, valveImage:"middle_right_valve-image", waterImage:"middle_right_water-image", executionOrder:2},
						  {valveName:"MiddleLeftValve", motor1Port:6, motor2Port:13, valveImage:"middle_left_valve-image", waterImage:"middle_left_water-image", executionOrder:2},
						  {valveName:"BackRightValve", motor1Port:14, motor2Port:15, valveImage:"back_right_valve-image", waterImage:"back_right_water-image", executionOrder:3},
						  {valveName:"BackLeftValve", motor1Port:18, motor2Port:23, valveImage:"back_left_valve-image", waterImage:"back_left_water-image", executionOrder:4},
						  {valveName:"BackMiddle1Valve", motor1Port:24, motor2Port:25, valveImage:"back_middle1_valve-image", waterImage:"back_middle1_water-image", executionOrder:3}];
						  
        var sensorArray = [{sensorName:"FontRightSensor", analogPort:0}];

        webiopi().ready(function() {
				//Add valves
				var index;
				var valveLen = valveArray.length;
				for(index = 0; index < valveLen; index++)
				{
					webiopi().callMacro("AddValve", [valveArray[index].valveName, valveArray[index].motor1Port, valveArray[index].motor2Port, valveArray[index].executionOrder] , null);
					webiopi().callMacro("GetValveState", valveArray[index].valveName, UpdateValveStateCallback);
				}
				
				webiopi().callMacro("IsAutoModeRunning", [], function(acro, args, data){
																							if(data)
																							{
																								gwd.actions.events.setInlineStyle(onOffButtonArray.autoImage, 'visibility: visible; ');
																								gwd.actions.events.setInlineStyle(onOffButtonArray.onImage, 'visibility: hidden; ');
																								gwd.actions.events.setInlineStyle(onOffButtonArray.offImage, 'visibility: hidden; ');	
																								UpdateAutoModeStatus();
																							}
																							else
																							{
																								//In case of running error
																								webiopi().callMacro("IsAutoModeError", [], function(acro, args, data)
																																			{
																																				if(data)
																																				{
																																					window.alert("Auto mode failed. The engine ran off. Please try again!");
																																				}
																																				else
																																				{
																																					webiopi().callMacro("IsMachineOpennig", [], function(macro, args, data)
																																																{
																																																	if(data)
																																																	{
																																																		gwd.actions.events.setInlineStyle(onOffButtonArray.autoImage, 'visibility: hidden; ');
																																																		gwd.actions.events.setInlineStyle(onOffButtonArray.onImage, 'visibility: visible; ');
																																																		gwd.actions.events.setInlineStyle(onOffButtonArray.offImage, 'visibility: hidden; ');
																																								
																																																		}
																																										});
																																				}
																																			});
	
																							}
																						});
				
				var sensorLen = sensorArray.length
				for(index = 0; index < sensorLen; index++)
				{
					webiopi().callMacro("AddSensor", [sensorArray[index].sensorName, sensorArray[index].analogPort] , null);
				}
				
				setInterval(UpdateSensor, 2000);		
				
                // Refresh GPIO buttons
                // pass true to refresh repeatedly of false to refresh once
                webiopi().refreshGPIO(true);
        });
        
        function UpdateValveStateCallback(macro, args, data)
		{
			UpdateValveState(args, data);
		}
		
        // function called through setInterval
		function UpdateSensor() 
		{
			var index;
			var sensorLen = sensorArray.length
			for(index = 0; index < sensorLen; index++)
			{
				webiopi().callMacro('GetSensorValue', sensorArray[index].sensorName, UpdateSensorCallback);
			}
		}    
		
		function UpdateSensorCallback(macro, args, data)
		{
			document.getElementById('Font-Sensor-Text').innerHTML = 'ชื้น:' + data;
		}
		
		function OpenValve(valveName)
		{
			webiopi().callMacro("OpenValve", valveName, OpenValveCallback);
		}
		
		function CloseValve(valveName)
		{	
			webiopi().callMacro("CloseValve", valveName, CloseValveCallback);											
			
		}
		
		function OpenValveCallback(macro, args, data)
		{
			UpdateValveState(args,data);
			
			webiopi().callMacro("IsMachineOpennig", [], function(lMacro, lAargs, lData){
																							if(lData)
																							{
																								gwd.actions.events.setInlineStyle(onOffButtonArray.autoImage, 'visibility: hidden; ');
																								gwd.actions.events.setInlineStyle(onOffButtonArray.onImage, 'visibility: visible; ');
																								gwd.actions.events.setInlineStyle(onOffButtonArray.offImage, 'visibility: hidden; ');
																				
																							}
																						});
		}
		
		function CloseValveCallback(macro, args, data)
		{
			UpdateValveState(args,data);
				
			webiopi().callMacro("IsMachineClosing", [], function(lMacro, lAargs, lData){
																							if(lData)
																							{
																								gwd.actions.events.setInlineStyle(onOffButtonArray.autoImage, 'visibility: hidden; ');
																								gwd.actions.events.setInlineStyle(onOffButtonArray.onImage, 'visibility: hidden; ');
																								gwd.actions.events.setInlineStyle(onOffButtonArray.offImage, 'visibility: visible; ');
																							
																							}
																						});			
		}
		
		function UpdateValveState(valveName, state)
		{
			
			var valveLength = valveArray.length;
			var index;
			
			for(index = 0; index < valveLength; index++)
			{
				if(valveArray[index].valveName == valveName)
				{	
					if(state == 1)
					{
						gwd.actions.events.setInlineStyle(valveArray[index].waterImage, 'visibility: visible; ');
						gwd.actions.events.setInlineStyle(valveArray[index].valveImage, 'visibility: hidden; ');
					}
					else
					{
						gwd.actions.events.setInlineStyle(valveArray[index].waterImage, 'visibility: hidden; ');
						gwd.actions.events.setInlineStyle(valveArray[index].valveImage, 'visibility: visible; ');
					}
					return;
				}
			}
		}

		function UpdateAutoModeStatus()
		{
							
			var UpdateAutoModeStatusHandle = setInterval(function(){
																	webiopi().callMacro("IsAutoModeRunning", 
																						[], 
																						function(acro, args, data){
																													if(data == false)
																													{
																														//Incase of running completed and running error
																														webiopi().callMacro("IsAutoModeError", 
																																								[], 
																																								function(acro, args, data){
																																									if(data)
																																									{
																																										window.alert("Auto mode failed. The engine ran off. Please try again!");
																																									}
																																									
																																								});
																														gwd.actions.events.setInlineStyle(onOffButtonArray.onImage, 'visibility: hidden; ');
																														gwd.actions.events.setInlineStyle(onOffButtonArray.autoImage, 'visibility: hidden; ');
																														gwd.actions.events.setInlineStyle(onOffButtonArray.offImage, 'visibility: visible; ');
																														clearInterval(UpdateAutoModeStatusHandle);
																													}
																
																													var index;
																													var valveLen = valveArray.length;
																													for(index = 0; index < valveLen; index++)
																													{
																														webiopi().callMacro("GetValveState", valveArray[index].valveName, UpdateValveStateCallback);
																													}
																																			
																													});
																	}, 3000);
		}
		
  </script>
        
  <script type="text/javascript" gwd-events="handlers">
	     
    window.gwd = window.gwd || {};
    
    gwd.OffImageClick = function(event) {	
		webiopi().callMacro("ExecutionAuto", [1200,1, onOffButtonArray.relayPort], null);
		gwd.actions.events.setInlineStyle(onOffButtonArray.autoImage, 'visibility: visible; ');
		gwd.actions.events.setInlineStyle(onOffButtonArray.onImage, 'visibility: hidden; ');
		gwd.actions.events.setInlineStyle(onOffButtonArray.offImage, 'visibility: hidden; ');																
		UpdateAutoModeStatus();
    };
    
    gwd.OnImageClick = function(event) {
		webiopi().callMacro('StopMachine', onOffButtonArray.relayPort, null);
		gwd.actions.events.setInlineStyle(onOffButtonArray.autoImage, 'visibility: hidden; ');
		gwd.actions.events.setInlineStyle(onOffButtonArray.onImage, 'visibility: hidden; ');
		gwd.actions.events.setInlineStyle(onOffButtonArray.offImage, 'visibility: visible; ');
    };
    
    gwd.AutoImageClick = function(event) {

    };
    
    gwd.FontRightValveOpenClick = function(event) {

		OpenValve(valveArray[0].valveName);
		
    };
    
    gwd.FontRightValveCloseClick = function(event) {
	
		CloseValve(valveArray[0].valveName);
		
    };
    
    gwd.FontLeftValveOpenClick = function(event) 
    {
		OpenValve(valveArray[1].valveName);
    };
    
    gwd.FontLeftValveCloseClick = function(event) 
    {
		CloseValve(valveArray[1].valveName);
    };

    gwd.MiddleRightValveOpenClick = function(event) 
    {
			OpenValve(valveArray[2].valveName);
    };
    
    gwd.MiddleRightValveCloseClick = function(event) 
    {
		CloseValve(valveArray[2].valveName);
    };


    gwd.MiddleLeftValveOpenClick = function(event) 
    {
			OpenValve(valveArray[3].valveName);
    };
    
    gwd.MiddleLeftValveCloseClick = function(event) 
    {
		CloseValve(valveArray[3].valveName);
    };
	
	
    gwd.BackRightValveOpenClick = function(event) 
    {
			OpenValve(valveArray[4].valveName);
    };
    
    gwd.BackRightValveCloseClick = function(event) 
    {
		CloseValve(valveArray[4].valveName);
    };

	
    gwd.BackLeftValveOpenClick = function(event) 
    {
			OpenValve(valveArray[5].valveName);
    };
    
    gwd.BackLeftValveCloseClick = function(event) 
    {
		CloseValve(valveArray[5].valveName);
    };
    
    
    gwd.BackMiddle1ValveOpenClick = function(event) 
    {
			OpenValve(valveArray[6].valveName);
    };
    
    gwd.BackMiddle1ValveCloseClick = function(event) 
    {
		CloseValve(valveArray[6].valveName);
    };
    
    
  </script>
  <script type="text/javascript" gwd-events="registration">
    // Support code for event handling in Google Web Designer
     // This script block is auto-generated. Please do not edit!
    gwd.actions.events.registerEventHandlers = function(event) {
	  gwd.actions.events.addHandler(onOffButtonArray.offImage, 'click', gwd.OffImageClick, false);
	  gwd.actions.events.addHandler(onOffButtonArray.onImage, 'click', gwd.OnImageClick, false);
	  gwd.actions.events.addHandler(onOffButtonArray.autoImage, 'click', gwd.AutoImageClick, false);
      gwd.actions.events.addHandler(valveArray[0].valveImage, 'click', gwd.FontRightValveOpenClick, false);
      gwd.actions.events.addHandler(valveArray[0].waterImage, 'click', gwd.FontRightValveCloseClick, false);
      
      gwd.actions.events.addHandler(valveArray[1].valveImage, 'click', gwd.FontLeftValveOpenClick, false);
      gwd.actions.events.addHandler(valveArray[1].waterImage, 'click', gwd.FontLeftValveCloseClick, false);
      
      gwd.actions.events.addHandler(valveArray[2].valveImage, 'click', gwd.MiddleRightValveOpenClick, false);
      gwd.actions.events.addHandler(valveArray[2].waterImage, 'click', gwd.MiddleRightValveCloseClick, false);
      
      gwd.actions.events.addHandler(valveArray[3].valveImage, 'click', gwd.MiddleLeftValveOpenClick, false);
      gwd.actions.events.addHandler(valveArray[3].waterImage, 'click', gwd.MiddleLeftValveCloseClick, false);
      
      gwd.actions.events.addHandler(valveArray[4].valveImage, 'click', gwd.BackRightValveOpenClick, false);
      gwd.actions.events.addHandler(valveArray[4].waterImage, 'click', gwd.BackRightValveCloseClick, false);
     
      gwd.actions.events.addHandler(valveArray[5].valveImage, 'click', gwd.BackLeftValveOpenClick, false);
      gwd.actions.events.addHandler(valveArray[5].waterImage, 'click', gwd.BackLeftValveCloseClick, false);
     
      gwd.actions.events.addHandler(valveArray[6].valveImage, 'click', gwd.BackMiddle1ValveOpenClick, false);
      gwd.actions.events.addHandler(valveArray[6].waterImage, 'click', gwd.BackMiddle1ValveCloseClick, false);
      
    };
    gwd.actions.events.deregisterEventHandlers = function(event) {
	  gwd.actions.events.removeHandler(onOffButtonArray.offImage, 'click', gwd.OffImageClick, false);
	  gwd.actions.events.removeHandler(onOffButtonArray.onImage, 'click', gwd.OnImageClick, false);
	  gwd.actions.events.removeHandler(onOffButtonArray.autoImage, 'click', gwd.AutoImageClick, false);
	  
      gwd.actions.events.removeHandler(valveArray[0].valveImage, 'click', gwd.FontRightValveOpenClick, false);
      gwd.actions.events.removeHandler(valveArray[0].waterImage, 'click', gwd.FontRightValveCloseClick, false);
      
      gwd.actions.events.removeHandler(valveArray[1].valveImage, 'click', gwd.FontLeftValveOpenClick, false);
      gwd.actions.events.removeHandler(valveArray[1].waterImage, 'click', gwd.FontLeftValveCloseClick, false);
      
      gwd.actions.events.removeHandler(valveArray[2].valveImage, 'click', gwd.MiddleRightValveOpenClick, false);
      gwd.actions.events.removeHandler(valveArray[2].waterImage, 'click', gwd.MiddleRightValveCloseClick, false);
      
      gwd.actions.events.removeHandler(valveArray[3].valveImage, 'click', gwd.MiddleLeftValveOpenClick, false);
      gwd.actions.events.removeHandler(valveArray[3].waterImage, 'click', gwd.MiddleLeftValveCloseClick, false);
      
      gwd.actions.events.removeHandler(valveArray[4].valveImage, 'click', gwd.BackRightValveOpenClick, false);
      gwd.actions.events.removeHandler(valveArray[4].waterImage, 'click', gwd.BackRightValveCloseClick, false);
      
      gwd.actions.events.removeHandler(valveArray[5].valveImage, 'click', gwd.BackLeftValveOpenClick, false);
      gwd.actions.events.removeHandler(valveArray[5].waterImage, 'click', gwd.BackLeftValveCloseClick, false);
      
      gwd.actions.events.removeHandler(valveArray[6].valveImage, 'click', gwd.BackMiddle1ValveOpenClick, false);
      gwd.actions.events.removeHandler(valveArray[6].waterImage, 'click', gwd.BackMiddle1ValveCloseClick, false);
      
    };
    document.addEventListener("DOMContentLoaded", gwd.actions.events.registerEventHandlers);
    document.addEventListener("unload", gwd.actions.events.deregisterEventHandlers);
  </script>
</head>

<body>
  <gwd-doubleclick id="gwd-ad" polite-load="">
    <gwd-metric-configuration></gwd-metric-configuration>
    <div is="gwd-pagedeck" class="gwd-page-container" id="pagedeck">
      <div is="gwd-page" id="page1" class="gwd-page-wrapper gwd-page-size gwd-lightbox" data-gwd-width="728px" data-gwd-height="500px">
        <div class="gwd-page-content gwd-page-size">
          <img is="gwd-image" source="assets/LandNew.jpg" id="land-image" class="gwd-img-j0w7">
          <img is="gwd-image" source="assets/Water_Droplet_Pin.PNG" id="font_right_valve-image" class="gwd-img-mood gwd-img-tqpw gwd-img-1fse">
          <img is="gwd-image" source="assets/Water_Droplet_Pin.PNG" id="font_left_valve-image" class="gwd-img-mood gwd-img-1u3h">
          <img is="gwd-image" source="assets/Water_Droplet_Pin.PNG" id="middle_left_valve-image" class="gwd-img-mood gwd-img-1u3h gwd-img-1q6m">
          <img is="gwd-image" source="assets/Water_Droplet_Pin.PNG" id="back_middle1_valve-image" class="gwd-img-mood gwd-img-1bdg">
          <img is="gwd-image" source="assets/Water_Droplet_Pin.PNG" id="middle_right_valve-image" class="gwd-img-mood gwd-img-1itq">
          <img is="gwd-image" source="assets/Water_Droplet_Pin.PNG" id="back_right_valve-image" class="gwd-img-mood gwd-img-tqpw gwd-img-8f5r">
          <img is="gwd-image" source="assets/Water_Droplet_Pin.PNG" id="back_left_valve-image" class="gwd-img-mood gwd-img-tqpw gwd-img-xdxv">
          <img is="gwd-image" source="assets/watering.gif" id="font_left_water-image" class="gwd-img-u0v9 gwd-img-3yc8">
          <img is="gwd-image" source="assets/watering.gif" id="middle_left_water-image" class="gwd-img-u0v9 gwd-img-1908">
          <img is="gwd-image" source="assets/watering.gif" id="middle_right_water-image" class="gwd-img-u0v9 gwd-img-16s1">
          <img is="gwd-image" source="assets/watering.gif" id="back_middle1_water-image" class="gwd-img-u0v9 gwd-img-162d">
          <img is="gwd-image" source="assets/watering.gif" id="back_right_water-image" class="gwd-img-u0v9 gwd-img-ds25">
          <img is="gwd-image" source="assets/watering.gif" id="back_left_water-image" class="gwd-img-u0v9 gwd-img-91eq">
          <img is="gwd-image" source="assets/watering.gif" id="font_right_water-image" class="gwd-img-u0v9 gwd-img-1m3g">
          <img is="gwd-image" source="assets/OnButton.jpg" id="on_button-image" class="gwd-img-97wm">
          <img is="gwd-image" source="assets/AutoButton.jpg" id="auto_button-image" class="gwd-img-97wm">
          <img is="gwd-image" source="assets/OffButton.jpg" id="off_button-image" class="gwd-img-97wm">
          <span class="gwd-span-srkn" id="Font-Sensor-Text">ชื้น:</span>
        </div>
      </div>
    </div>
  </gwd-doubleclick>
  <script type="text/javascript" id="gwd-init-code">
    (function() {
      var gwdAd = document.getElementById('gwd-ad');

      /**
       * Handles the DOMContentLoaded event. The DOMContentLoaded event is
       * fired when the document has been completely loaded and parsed.
       */
      function handleDomContentLoaded(event)
      {
      }

      /**
       * Handles the WebComponentsReady event. This event is fired when all
       * custom elements have been registered and upgraded.
       */
      function handleWebComponentsReady(event) {
        // Start the Ad lifecycle.
        setTimeout(function() {
          gwdAd.initAd();
        }, 0);
      }

      /**
       * Handles the event that is dispatched after the Ad has been
       * initialized and before the default page of the Ad is shown.
       */
      function handleAdInitialized(event) {}

      window.addEventListener('DOMContentLoaded',
        handleDomContentLoaded, false);
      window.addEventListener('WebComponentsReady',
        handleWebComponentsReady, false);
      window.addEventListener('adinitialized',
        handleAdInitialized, false);
    })();
  </script>
</body>

</html>
